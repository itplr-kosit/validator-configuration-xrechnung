<?xml version="1.0" encoding="UTF-8"?>
<project basedir="." name="abu-docbook-retriever" default="dependency-resolve-docbook">


  <target name="init">
    <echo message="Calling docbook.init task" />
    <mkdir dir="${build.dir}" />
    <mkdir dir="${lib.dir}" />
  </target>

  <target name="dependency-resolve-docbook" depends="init"
    unless="${docbook.available}" description="Downloads DocBook XSL dependency">

    <property name="docbook.xsl.version" value="1.79.2" />
    <property name="docbook.artifact.name"
      value="docbook-xsl-${docbook.xsl.version}" />

    <property name="docbook.xsl.release.zip.url"
      value="https://github.com/docbook/xslt10-stylesheets/releases/download/release%2F${docbook.xsl.version}/${docbook.artifact.name}.zip" />

    <get src="${docbook.xsl.release.zip.url}" dest="${lib.dir}"
      usetimestamp="true" />

    <unzip src="${lib.dir}/${docbook.artifact.name}.zip" dest="${lib.dir}">
      <patternset>
        <include name="*/VERSION.xsl" />
        <include name="*/catalog.xml" />
        <include name="*/fo/*.xsl" />
        <include name="*/lib/lib.xsl" />
        <include name="*/common/*" />
        <include name="*/template/*" />
        <include name="*/html/chunker.xsl" />
      </patternset>
    </unzip>
  </target>


</project>
